<!-- layouts/shortcodes/ga_top_pages_yearly.html -->
{{ $limit := 10 }}
{{ if .Get "limit" }}
  {{ $limit = .Get "limit" }}
{{ end }}
<table>
  <thead>
    <tr>
      <th>Page</th>
      <th>Views (Last Year)</th>
    </tr>
  </thead>
  <tbody>
    {{ if .Site.Data.ga_data.top_pages_yearly }}
      {{ range first $limit .Site.Data.ga_data.top_pages_yearly }}
      <tr>
        <td>
          {{ with .Site.GetPage .page }}
            {{ if ne .Title "" }}
              <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            {{ else }}
              <a href="{{ .RelPermalink }}">{{ .RelPermalink }}</a>
            {{ end }}
          {{ else }}
            <a href="https://forrt.org{{ .page }}">https://forrt.org{{ .page }}</a>
          {{ end }}
        </td>
        <td>{{ .views }}</td>
      </tr>
      {{ end }}
    {{ else }}
      <tr>
        <td colspan="2">Yearly data not available yet</td>
      </tr>
    {{ end }}
  </tbody>
</table>
