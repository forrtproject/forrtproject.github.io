<!-- layouts/shortcodes/top_pages.html -->
{{ $limit := 10 }}
{{ if .Get "limit" }}
  {{ $limit = .Get "limit" }}
{{ end }}
<table>
  <thead>
    <tr>
      <th>Page</th>
      <th>Views</th>
    </tr>
  </thead>
  <tbody>
    {{ range first $limit .Site.Data.ga_data.top_pages }}
    <tr>
      <td>
        {{ with .Site.GetPage .page }}
          {{ if ne .Title "" }}
            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
          {{ else }}
            <a href="{{ .RelPermalink }}">{{ .RelPermalink }}</a>
          {{ end }}
        {{ else }}
          <a href="https://forrt.org{{ .page }}">https://forrt.org{{ .page }}</a>
        {{ end }}
      </td>
      <td>{{ .views }}</td>
    </tr>
    {{ end }}
  </tbody>
</table>
